{"ast":null,"code":"import { Hero } from './hero';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./backend.service\";\nimport * as i2 from \"./logger.service\";\nimport * as i3 from \"./darkly.service\";\nexport class HeroService {\n  constructor(backend, logger, darkly) {\n    this.backend = backend;\n    this.logger = logger;\n    this.darkly = darkly;\n    this.heroes = [];\n    this.emptyHeroes = [];\n  }\n  getHeroes() {\n    if (this.darkly.ldClient.variation(\"beta_users\", false)) {\n      this.logger.log(`Fetched flag ${this.darkly.ldClient.variation(\"beta_users\", false)}`);\n      return this.emptyHeroes;\n    } else {\n      this.backend.getAll(Hero).then(heroes => {\n        this.logger.log(`Fetched ${heroes.length} heroes.`);\n        this.heroes.push(...heroes); // fill cache\n      });\n\n      return this.heroes;\n    }\n  }\n}\nHeroService.ɵfac = function HeroService_Factory(t) {\n  return new (t || HeroService)(i0.ɵɵinject(i1.BackendService), i0.ɵɵinject(i2.Logger), i0.ɵɵinject(i3.DarklyService));\n};\nHeroService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: HeroService,\n  factory: HeroService.ɵfac\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}